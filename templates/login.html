{% extends "base.html" %}
{% block content %}

<style>
  .g-0 {
    gap: 0 !important;
  }

  .login-outer {
    min-height: 80vh;
  }

  .left-col {
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f8f9fa;
    min-height: 80vh;
    padding: 40px;
    text-align: center;
  }

  .left-col h1 {
    font-size: 2.8rem;
    font-weight: 700;
    color: #198754;
    line-height: 1.3;
  }

  .left-col p {
    font-size: 1.2rem;
    color: #555;
    margin-top: 15px;
  }

  .right-col {
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f8f9fa;
    padding: 40px;
    min-height: 80vh;
  }

  .login-card {
    width: 100%;
    max-width: 420px;
    padding: 30px;
    border-radius: 12px;
    background: #fff;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
  }

  .login-card h2 {
    font-weight: 700;
    color: #198754;
    margin-bottom: 20px;
    text-align: center;
  }

  .login-card .form-control {
    border-radius: 8px;
    padding: 12px;
  }

  .login-card .btn {
    border-radius: 8px;
    padding: 12px;
    font-weight: 600;
    font-size: 1.05rem;
  }

  #togglePassword {
    cursor: pointer;
  }

  @media (min-width: 768px) {
    .left-col,
    .right-col {
      flex: 0 0 50%;
      max-width: 50%;
    }
  }
</style>

<div class="container-fluid g-0 login-outer">
  <div class="row g-0">
    <!-- LEFT: Tagline -->
    <div class="col-12 col-md-6 left-col">
      <div>
        <h1>Fuel Your Body,<br> Nourish Your Health</h1>
        <p>Helio helps you choose the right meal plan — personalized just for you.</p>
      </div>
    </div>

    <!-- RIGHT: Login Card -->
    <div class="col-12 col-md-6 right-col">
      <div class="login-card">
        <h2>Login</h2>

        <!-- Flash message section -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <form method="POST">
          <!-- Email Field -->
          <div class="mb-3">
            <label for="email" class="form-label">Email Address</label>
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              value="{{ request.form.get('email', '') }}"
              required
            >
          </div>

          <!-- Password Field -->
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <div class="input-group">
              <input
                type="password"
                class="form-control"
                id="password"
                name="password"
                value="{{ request.form.get('password', '') }}"
                required
              >
              <span class="input-group-text" id="togglePassword">
                <i class="bi bi-eye-fill"></i>
              </span>
            </div>
          </div>

          <div class="d-grid">
            <button type="submit" class="btn btn-success btn-lg">Login</button>
          </div>
        </form>

        <div class="text-center mt-2">
          <a href="{{ url_for('forgot_password') }}" class="text-muted small">Forgot Password?</a>
        </div>

        <p class="text-center mt-3 mb-0">
          Don’t have an account?
          <a href="{{ url_for('register') }}" class="text-success fw-bold">Register</a>
        </p>
      </div>
    </div>
  </div>
</div>

<!-- JavaScript for password visibility toggle -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    const eyeIcon = togglePassword.querySelector('i');

    togglePassword.addEventListener('click', function () {
      const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordInput.setAttribute('type', type);
      eyeIcon.classList.toggle('bi-eye-fill');
      eyeIcon.classList.toggle('bi-eye-slash-fill');
    });
  });
</script>

{% endblock %}
