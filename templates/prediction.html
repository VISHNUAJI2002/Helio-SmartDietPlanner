{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
    <div>
        <h2 class="text-success text-center mb-4">Recommended Meal Plan</h2>
        <hr>
        <!-- <h4 class="text-muted mb-1"><b>Diet name:</b><i> {{ meal }}</i></h4> -->
        <div class="alert alert-info text-start mt-3" style="border-radius:12px;">
            <i class="bi bi-lightbulb-fill text-success"> {{ description }}</i>
        </div>

        {% if recommendations %}
        {% for plan in recommendations %}
        <div class="card shadow-sm mb-4">
            <div class="card-body text-start">

                <div class="d-flex justify-content-between align-items-start">
                    <h5 class="card-title">üçΩÔ∏è Diet {{ loop.index }}</h5>

                    {% if loop.index in liked_plan_indices %}
                    <!-- Already liked: green button (click to unlike) -->
                    <a href="{{ url_for('like_diet', diet_name=meal, plan_index=loop.index) }}"
                        class="btn btn-success rounded-circle" style="width:40px; height:40px;">
                        <i class="bi bi-hand-thumbs-up-fill"></i>
                    </a>
                    {% else %}
                    <!-- Not liked: red-outline button (click to like) -->
                    <a href="{{ url_for('like_diet', diet_name=meal, plan_index=loop.index) }}"
                        class="btn btn-outline-danger rounded-circle" style="width:40px; height:40px; border:none;">
                        <i class="bi bi-hand-thumbs-up"></i>
                    </a>
                    {% endif %}
                </div>

                <span class="text-muted">{{ likes_per_plan[loop.index0] }} Likes</span>
                <hr>
                <p><strong>Breakfast:</strong> {{ plan.Breakfast }}</p>
                <p><strong>Lunch:</strong> {{ plan.Lunch }}</p>
                <p><strong>Dinner:</strong> {{ plan.Dinner }}</p>
            </div>

        </div>
        {% endfor %}
        {% else %}
        <p class="text-muted text-center">No recommendations available.</p>
        {% endif %}

        <div class="text-center">
            <a href="{{ url_for('profile') }}" class="btn btn-primary mt-3">‚¨Ö Back to Profile</a>
        </div>
    </div>
</div>
{% endblock %}